{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const API_KEY = '46863528-4fa0c0b33a1ffe205dd5514d4';\nexport const BASE_URL = 'https://pixabay.com/api/';\nexport const ITEMS_PER_PAGE = 15;\n\nexport async function fetchData(url = BASE_URL, options = {}) {\n  return axios(url, options);\n}\n","export function createGallery(array) {\n  return array\n    .map(\n      item => `<li class=\"list-item\">\n<a class='link-item' href=\"${item.largeImageURL}\">\n  <img src=\"${item.webformatURL}\" alt=\"${item.tags}\" width = '360' height = '200'>\n <div class='desc-container'>\n          <div>\n            <p class='title'>likes</p>\n            <p class='title-value'>${item.likes}</p>\n          </div>\n          <div>\n            <p class='title'>views</p>\n            <p class='title-value'>${item.views}</p>\n          </div>\n          <div>\n            <p class='title'>comments</p>\n            <p class='title-value'>${item.comments}</p>\n          </div>\n          <div>\n            <p class='title'>downloads</p>\n            <p class='title-value'>${item.downloads}</p>\n          </div>\n        </div>\n</a>\n</li>`\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { API_KEY, BASE_URL, fetchData, ITEMS_PER_PAGE } from './js/pixabay-api';\nimport { createGallery } from './js/render-functions';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryLightbox = new SimpleLightbox('.gallery a', {\n  overlayOpacity: 0.8,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst form = document.querySelector('form');\nconst list = document.querySelector('.gallery');\nconst input = document.querySelector('input');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nlet page = 1;\n\nform.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', loadMorePage);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  list.innerHTML = '';\n  if (!input.value.trim()) {\n    iziToast.show({\n      message:\n        \"Please enter the data to perform the search.\",\n      position: 'topRight',\n      color: '#ef4040',\n      messageColor: '#fff',\n      theme: 'dark',\n    });\n    return;\n  }\n  page = 1;\n  const query = {\n    key: API_KEY,\n    q: input.value.trim(),\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: ITEMS_PER_PAGE,\n  };\n  showLoader();\n  try {\n    const response = await fetchData(`${BASE_URL}`, { params: query });\n\n    if (response.data.hits.length < 1) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        color: '#ef4040',\n        messageColor: '#fff',\n        theme: 'dark',\n      });\n      list.innerHTML = '';\n      return;\n    }\n\n    list.innerHTML = createGallery(response.data.hits);\n    galleryLightbox.refresh();\n    response.data.total > ITEMS_PER_PAGE\n      ? showLoadMoreBtn()\n      : hideLoadMoreBtn();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction showLoader() {\n  loader.classList.remove('hidden');\n}\nfunction hideLoader() {\n  loader.classList.add('hidden');\n}\n\nfunction showLoadMoreBtn() {\n  loadMoreBtn.classList.remove('hidden-load-btn');\n}\nfunction hideLoadMoreBtn() {\n  loadMoreBtn.classList.add('hidden-load-btn');\n}\n\nasync function loadMorePage() {\n  page += 1;\n  try {\n    showLoader();\n    const query = {\n      key: API_KEY,\n      q: input.value.trim(),\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: ITEMS_PER_PAGE,\n    };\n    const response = await fetchData(`${BASE_URL}`, { params: query }, page);\n\n    list.insertAdjacentHTML('beforeend', createGallery(response.data.hits));\n    galleryLightbox.refresh();\n    const rect = document.querySelector('.gallery li').getBoundingClientRect();\n    window.scrollBy({\n      top: rect.height * 2,\n      behavior: 'smooth',\n    });\n\n    const lastPage = Math.ceil(response.data.total / ITEMS_PER_PAGE);\n    if (lastPage === page) {\n      hideLoadMoreBtn();\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'bottomCenter',\n        color: '#E6E6FA',\n        messageColor: '#483D8B',\n        theme: 'light',\n      });\n      return;\n    }\n    showLoadMoreBtn();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n}\n"],"names":["API_KEY","BASE_URL","ITEMS_PER_PAGE","fetchData","url","options","axios","createGallery","array","item","galleryLightbox","SimpleLightbox","form","list","input","loader","loadMoreBtn","page","handleSubmit","loadMorePage","event","iziToast","query","showLoader","response","showLoadMoreBtn","hideLoadMoreBtn","error","hideLoader","rect"],"mappings":"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"}